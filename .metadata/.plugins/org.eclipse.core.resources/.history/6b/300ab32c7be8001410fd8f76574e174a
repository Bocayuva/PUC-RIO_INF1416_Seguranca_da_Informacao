package main.java;


public class PrimeiraEtapa {

	public static begin(){
		
		frame.getContentPane().removeAll();
		
		JPanel panel = new JPanel();
		frame.getContentPane().add(panel, BorderLayout.CENTER);
		
		JLabel lblListViewPrograma = new JLabel("List View Programa");
		panel.add(lblListViewPrograma);
		
		final JLabel lbMsgErro = new JLabel("-");
		panel.add(lbMsgErro);
		
		final JTextField txtLoginName = new JTextField();
		panel.add(txtLoginName);
		txtLoginName.setColumns(10);
		
		JButton btnLogin = new JButton("Login");
		btnLogin.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent arg0) {
				String lgName = txtLoginName.getText();
				if (lgName.length() > 20) {
					lbMsgErro.setText("Login name inválido!");
				}else{
					usuario = Usuario.buscarPorLogin(lgName);
					if(usuario == null){
						/* Usuario não localizado */
						lbMsgErro.setText("Usuário não localizado!");
					}else{						
						if(usuario.isDisabled()){
							lbMsgErro.setText("Usuário está bloqueado!");
						}else{
							Calendar calendar = Calendar.getInstance();
							Timestamp data_atual = new Timestamp(calendar.getTime().getTime());
							
							if(usuario.getBlocked_at().after(data_atual)){
								lbMsgErro.setText("Usuário está bloqueado!");
							}else{
								lbMsgErro.setText("Usuário encontrado!");
								segundaetapa();
							}
							
						}	
					}
					
				}
			}
		});
		panel.add(btnLogin);
		
	}
	
}
